var app=angular.module("app",["angular-loading-bar","ui.router","ui.bootstrap","ui.sortable"]);app.config(["$stateProvider","$urlRouterProvider",function(t,r){r.otherwise("/adItem"),t.state("adItem",{url:"/adItem",templateUrl:"app/components/adItem/adItem.html",controller:"adItemController",controllerAs:"adItemCtrl"})}]);

var AdItemController=function(o){this.adItemService=o};AdItemController.prototype.display=function(o){var r=this;r.adItemService.Crawl().sendData(o).then(function(o){r.show=!0,r.links=o.links,r.address=o.propertyInfo.address,r.bedRoom=o.propertyInfo.no_bed,r.bathRoom=o.propertyInfo.no_bath,r.carport=o.propertyInfo.no_car}),r.sortableOptions={stop:function(o,t){var n=r.links.map(function(o){return o}).join(",\n");console.log("Stop: \n"+n)}}},angular.module("app").controller("adItemController",["adItemService",AdItemController]);
var AdItemDirective=function(e){function a(a,t,n){console.log(e.Crawl().getData()),t.find("canvas").bind("mouseenter",function(){}),t.find("canvas").bind("mouseleave",function(){t.find("canvas").css("opacity","1")});var o=t.find("canvas")[0],r=o.getContext("2d");r.globalCompositeOperation="source-over";var i=new Image,c=new Image;i.onload=function(){r.drawImage(i,0,0,80,60),0==a.out&&r.drawImage(c,0,0,40.4,37.4)},i.src=e.Crawl().getData().links[a.out],c.src=e.Crawl().getData().templateDir.Banner}var t={restrict:"AE",templateUrl:"app/components/adItem/adItemDirective.html",link:a,scope:{out:"@",model:"=",remove:"&"}};return t};angular.module("app").directive("adItem",["adItemService",AdItemDirective]);
var AdItemService=function(e,t){this.$http=e,this.$q=t};AdItemService.prototype.Crawl=function(){var e=this,t={sendData:function(t){var r={url:t},p=e.$q.defer(),i=e.$http.post("api/crawl",r);return i.success(function(t){e.links=t.links,e.propertyInfo=t.propertyInfo,e.templateDir=t.templateDir,p.resolve({links:t.links,propertyInfo:t.propertyInfo,templateDir:t.templateDir})}),p.promise},getData:function(){var t={links:e.links,propertyInfo:e.propertyInfo,templateDir:e.templateDir};return t}};return t},angular.module("app").service("adItemService",["$http","$q",AdItemService]);